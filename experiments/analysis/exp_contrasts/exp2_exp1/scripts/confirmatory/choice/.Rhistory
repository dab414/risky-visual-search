install.packages('ez')
library(tidyverse)
library(ez)
e1 <- read.csv('../../../../../exp1a/data/exp1a_main.csv')
e2 <- read.csv('../../../../../exp2/data/exp2_main.csv')
e1 <- read.csv('../../../../../exp1a/data/exp1a_main.csv')
e2 <- read.csv('../../../../../exp2/data/exp2_main.csv')
N_e1 <- length(unique(e1$subject))
N_e2 <- length(unique(e2$subject))
N_e1
N_e2
head(e1)
e1 <- read.csv('../../../../../exp1a/data/exp1a_main.csv')
e2 <- read.csv('../../../../../exp2/data/exp2_main.csv')
N_e1 <- length(unique(e1$subject))
N_e2 <- length(unique(e2$subject))
keep <- c('subject', 'magnitude', 'direction', 'ssd')
e1$experiment <- 'Experiment 1'
e2$experiment <- 'Experiment 2'
d <- rbind(e1, e2)
head(d)
d %>%
group_by(subject, direction, magnitude, experiment) %>%
summarize(ssd_ = mean(ssd)) %>%
group_by(direction, experiment) %>%
summarize(ssd = mean(ssd_), se = sd(ssd_) / sqrt(N)) %>%
ggplot(aes(x = direction, y = ssd)) +
geom_bar(stat = 'identity', aes(fill = magnitude), position = position_dodge(width= .9)) +
geom_errorbar(aes(ymin = ssd - se, ymax = ssd + se, group = magnitude), width = .5, position = position_dodge(width= .9)) +
facet_wrap(~experiment) +
ylim(0,1) +
labs(
x = 'Framing',
y = 'Proportion Selection of Safe Deck',
caption = paste0('N = ', N, '. N needed is 50.')
) +
theme_bw() +
theme(strip.background = element_rect(color = 'black', fill = 'white'))
N = N_e1 + N_e2
d %>%
group_by(subject, direction, magnitude, experiment) %>%
summarize(ssd_ = mean(ssd)) %>%
group_by(direction, experiment) %>%
summarize(ssd = mean(ssd_), se = sd(ssd_) / sqrt(N)) %>%
ggplot(aes(x = direction, y = ssd)) +
geom_bar(stat = 'identity', aes(fill = magnitude), position = position_dodge(width= .9)) +
geom_errorbar(aes(ymin = ssd - se, ymax = ssd + se, group = magnitude), width = .5, position = position_dodge(width= .9)) +
facet_wrap(~experiment) +
ylim(0,1) +
labs(
x = 'Framing',
y = 'Proportion Selection of Safe Deck',
caption = paste0('N = ', N, '. N needed is 50.')
) +
theme_bw() +
theme(strip.background = element_rect(color = 'black', fill = 'white'))
d %>%
group_by(subject, direction, magnitude, experiment) %>%
summarize(ssd_ = mean(ssd)) %>%
group_by(direction, experiment) %>%
summarize(ssd = mean(ssd_), se = sd(ssd_) / sqrt(N)) %>%
ggplot(aes(x = direction, y = ssd)) +
geom_bar(stat = 'identity') +
geom_errorbar(aes(ymin = ssd - se, ymax = ssd + se), width = .5) +
facet_wrap(~experiment) +
ylim(0,1) +
labs(
x = 'Framing',
y = 'Proportion Selection of Safe Deck',
caption = paste0('N = ', N, '. N needed is 50.')
) +
theme_bw() +
theme(strip.background = element_rect(color = 'black', fill = 'white'))
d %>%
group_by(subject, direction, magnitude, experiment) %>%
summarize(ssd_ = mean(ssd)) %>%
group_by(direction, experiment) %>%
summarize(ssd = mean(ssd_), se = sd(ssd_) / sqrt(N)) %>%
ggplot(aes(x = direction, y = ssd)) +
geom_bar(stat = 'identity') +
geom_errorbar(aes(ymin = ssd - se, ymax = ssd + se), width = .5) +
facet_wrap(~experiment) +
ylim(0,1) +
labs(
x = 'Framing',
y = 'Proportion Selection of Safe Deck',
caption = paste0('N = ', N)
) +
theme_bw() +
theme(strip.background = element_rect(color = 'black', fill = 'white'))
m <- d %>%
group_by(subject, direction, experiment) %>%
summarize(ssd_ = mean(ssd)) %>%
group_by(direction, experiment) %>%
summarize(ssd = mean(ssd_))
d %>%
group_by(subject, direction, experiment) %>%
summarize(ssd = mean(ssd)) %>%
ggplot(aes(x = direction, y = ssd)) +
geom_violin(fill = 'steelblue', alpha = .2) +
geom_boxplot(fill = NA) +
geom_jitter(width = .05, alpha = .7) +
geom_line(aes(group = subject), linetype = 'dashed', alpha = .7) +
facet_wrap(~experiment) +
ylim(0,1) +
labs(
x = 'Direction',
y = 'Proportion Selection of Safe Option'
) +
theme_bw()
m <- d %>%
group_by(subject, direction, experiment) %>%
summarize(ssd_ = mean(ssd)) %>%
group_by(direction, experiment) %>%
summarize(ssd = mean(ssd_))
d %>%
group_by(subject, direction, experiment) %>%
summarize(ssd = mean(ssd)) %>%
ggplot(aes(x = direction, y = ssd)) +
geom_violin(fill = 'steelblue', alpha = .2) +
geom_boxplot(fill = NA) +
geom_jitter(width = .05, alpha = .7) +
geom_line(aes(group = subject), linetype = 'dashed', alpha = .7) +
facet_wrap(~experiment) +
ylim(0,1) +
labs(
x = 'Direction',
y = 'Proportion Selection of Safe Option'
) +
theme_bw() +
theme(strip.background = element_rect(color = 'black', fill = 'white'))
d %>%
group_by(subject, direction, experiment) %>%
summarize(ssd = mean(ssd)) %>%
ggplot(aes(x = direction, y = ssd)) +
geom_violin(fill = 'steelblue', alpha = .2) +
geom_boxplot(fill = NA) +
geom_jitter(width = .05, alpha = .7) +
geom_line(aes(group = subject), linetype = 'dashed', alpha = .7) +
facet_wrap(~experiment) +
ylim(0,1) +
labs(
x = 'Direction',
y = 'Proportion Selection of Safe Option',
caption = 'N = 100'
) +
theme_bw() +
theme(strip.background = element_rect(color = 'black', fill = 'white'))
d %>%
group_by(subject, direction, experiment) %>%
summarize(ssd = mean(ssd)) %>%
ggplot(aes(x = direction, y = ssd)) +
geom_violin(fill = 'steelblue', alpha = .2) +
geom_boxplot(fill = NA) +
geom_jitter(width = .05, alpha = .7) +
geom_line(aes(group = subject), linetype = 'dashed', alpha = .7) +
facet_wrap(~experiment) +
ylim(0,1) +
labs(
x = 'Direction',
y = 'Proportion Selection of Safe Option',
caption = 'N = 100'
) +
theme_bw() +
theme(strip.background = element_rect(color = 'black', fill = 'white'))
library(tidyverse)
library(ez)
e1 <- read.csv('../../../../../exp1a/data/exp1a_main.csv')
e2 <- read.csv('../../../../../exp2/data/exp2_main.csv')
N_e1 <- length(unique(e1$subject))
N_e2 <- length(unique(e2$subject))
N = N_e1 + N_e2
keep <- c('subject', 'magnitude', 'direction', 'ssd')
e1$experiment <- 'Experiment 1'
e2$experiment <- 'Experiment 2'
d <- rbind(e1, e2)
head(d)
d %>%
group_by(subject, direction, magnitude, experiment) %>%
summarize(ssd_ = mean(ssd)) %>%
group_by(direction, experiment) %>%
summarize(ssd = mean(ssd_), se = sd(ssd_) / sqrt(N)) %>%
ggplot(aes(x = direction, y = ssd)) +
geom_bar(stat = 'identity') +
geom_errorbar(aes(ymin = ssd - se, ymax = ssd + se), width = .5) +
facet_wrap(~experiment) +
ylim(0,1) +
labs(
x = 'Framing',
y = 'Proportion Selection of Safe Deck',
caption = paste0('N = ', N)
) +
theme_bw() +
theme(strip.background = element_rect(color = 'black', fill = 'white'))
ggsave('figures/pdf/e1_e2_means.pdf', height = 5.5, width = 7.5)
ggsave('figures/png/e1_e2_means.png', height = 5.5, width = 7.5, dpi = 300, units = 'in')
m <- d %>%
group_by(subject, direction, experiment) %>%
summarize(ssd_ = mean(ssd)) %>%
group_by(direction, experiment) %>%
summarize(ssd = mean(ssd_))
d %>%
group_by(subject, direction, experiment) %>%
summarize(ssd = mean(ssd)) %>%
ggplot(aes(x = direction, y = ssd)) +
geom_violin(fill = 'steelblue', alpha = .2) +
geom_boxplot(fill = NA) +
geom_jitter(width = .05, alpha = .7) +
geom_line(aes(group = subject), linetype = 'dashed', alpha = .7) +
facet_wrap(~experiment) +
ylim(0,1) +
labs(
x = 'Direction',
y = 'Proportion Selection of Safe Option',
caption = 'N = 100'
) +
theme_bw() +
theme(strip.background = element_rect(color = 'black', fill = 'white'))
ggsave('figures/pdf/e1_e2_individuals.pdf', height = 5.5, width = 7.5)
ggsave('figures/pdf/e1_e2_individuals.png', height = 5.5, width = 7.5, dpi = 300, units = 'in')
ggsave('figures/png/e1_e2_individuals.png', height = 5.5, width = 7.5, dpi = 300, units = 'in')
library(ez)
ad <- d %>%
mutate(ssd = 1 - selectedRiskyDeck) %>%
group_by(subject, experiment, direction, magnitude) %>%
summarize(ssd_ = mean(ssd))
ezANOVA(wid = subject, within = .(direction, magnitude), between = .(experiment),
dv = ssd_, detailed = TRUE, data = ad)
m1 <- ezANOVA(wid = subject, within = .(direction, magnitude), between = .(experiment),
dv = ssd_, detailed = TRUE, data = ad)
m1
m1 <- cbind(m1, data.frame(n2p = m1$ANOVA$SSn / (m1$ANOVA$SSn + m1$ANOVA$SSd)))
m1
d %>%
group_by(subject, direction, magnitude, experiment) %>%
summarize(ssd_ = mean(ssd)) %>%
group_by(direction, experiment) %>%
summarize(ssd = mean(ssd_), se = sd(ssd_) / sqrt(N)) %>%
print()
d %>%
group_by(subject, direction, magnitude, experiment) %>%
summarize(ssd_ = mean(ssd)) %>%
group_by(direction, experiment) %>%
summarize(ssd = mean(ssd_), se = sd(ssd_) / sqrt(N)) %>%
print() %>%
ggplot(aes(x = direction, y = ssd)) +
geom_bar(stat = 'identity') +
geom_errorbar(aes(ymin = ssd - se, ymax = ssd + se), width = .5) +
facet_wrap(~experiment) +
ylim(0,1) +
labs(
x = 'Framing',
y = 'Proportion Selection of Safe Deck',
caption = paste0('N = ', N)
) +
theme_bw() +
theme(strip.background = element_rect(color = 'black', fill = 'white'))
d %>%
group_by(subject, direction) %>%
summarize(ssd_ = mean(ssd)) %>%
group_by(direction) %>%
summarize(ssd = mean(ssd_), se = sd(ssd_) / sqrt(N))
help(BayesFactor::anovaBF)
help(BayesFactor)
install.packages('BayesFactor')
library(BayesFactor)
b1 <- anovaBF(ssd ~ direction * magnitude * experiment, data = d)
b1 <- anovaBF(ssd ~ factor(direction) * factor(magnitude) * factor(experiment), data = d)
d$direction <- factor(d$direction)
d$magnitude <- factor(d$magnitude)
d$experiment <- factor(d$experiment)
b1 <- anovaBF(ssd ~ direction * magnitude * experiment, data = d)
b1
b_noexp <- anovaBF(ssd ~ direction * magnitude, data = d)
b1[5] / b_noexp
b_noexp / b1
b_noexp / b1[4]
q()
install.packages('BayesFactor')
library(tidyverse)
library(ez)
library(BayesFactor)
e1 <- read.csv('../../../../../exp1a/data/exp1a_main.csv')
e2 <- read.csv('../../../../../exp2/data/exp2_main.csv')
N_e1 <- length(unique(e1$subject))
N_e2 <- length(unique(e2$subject))
N = N_e1 + N_e2
keep <- c('subject', 'magnitude', 'direction', 'ssd')
e1$experiment <- 'Experiment 1'
e2$experiment <- 'Experiment 2'
d <- rbind(e1, e2)
head(d)
d %>%
group_by(subject, direction, magnitude, experiment) %>%
summarize(ssd_ = mean(ssd)) %>%
group_by(direction, experiment) %>%
summarize(ssd = mean(ssd_), se = sd(ssd_) / sqrt(N)) %>%
print() %>%
ggplot(aes(x = direction, y = ssd)) +
geom_bar(stat = 'identity') +
geom_errorbar(aes(ymin = ssd - se, ymax = ssd + se), width = .5) +
facet_wrap(~experiment) +
ylim(0,1) +
labs(
x = 'Framing',
y = 'Proportion Selection of Safe Deck',
caption = paste0('N = ', N)
) +
theme_bw() +
theme(strip.background = element_rect(color = 'black', fill = 'white'))
ggsave('figures/pdf/e1_e2_means.pdf', height = 5.5, width = 7.5)
ggsave('figures/png/e1_e2_means.png', height = 5.5, width = 7.5, dpi = 300, units = 'in')
m <- d %>%
group_by(subject, direction, experiment) %>%
summarize(ssd_ = mean(ssd)) %>%
group_by(direction, experiment) %>%
summarize(ssd = mean(ssd_))
d %>%
group_by(subject, direction, experiment) %>%
summarize(ssd = mean(ssd)) %>%
ggplot(aes(x = direction, y = ssd)) +
geom_violin(fill = 'steelblue', alpha = .2) +
geom_boxplot(fill = NA) +
geom_jitter(width = .05, alpha = .7) +
geom_line(aes(group = subject), linetype = 'dashed', alpha = .7) +
facet_wrap(~experiment) +
ylim(0,1) +
labs(
x = 'Direction',
y = 'Proportion Selection of Safe Option',
caption = 'N = 100'
) +
theme_bw() +
theme(strip.background = element_rect(color = 'black', fill = 'white'))
ggsave('figures/pdf/e1_e2_individuals.pdf', height = 5.5, width = 7.5)
ggsave('figures/png/e1_e2_individuals.png', height = 5.5, width = 7.5, dpi = 300, units = 'in')
library(ez)
ad <- d %>%
mutate(ssd = 1 - selectedRiskyDeck) %>%
group_by(subject, experiment, direction, magnitude) %>%
summarize(ssd_ = mean(ssd))
m1 <- ezANOVA(wid = subject, within = .(direction, magnitude), between = .(experiment),
dv = ssd_, detailed = TRUE, data = ad)
m1 <- cbind(m1, data.frame(n2p = m1$ANOVA$SSn / (m1$ANOVA$SSn + m1$ANOVA$SSd)))
d %>%
group_by(subject, direction) %>%
summarize(ssd_ = mean(ssd)) %>%
group_by(direction) %>%
summarize(ssd = mean(ssd_), se = sd(ssd_) / sqrt(N))
d$direction <- factor(d$direction)
d$magnitude <- factor(d$magnitude)
d$experiment <- factor(d$experiment)
b1 <- anovaBF(ssd ~ direction * magnitude * experiment, data = d)
b_noexp <- anovaBF(ssd ~ direction * magnitude, data = d)
b_noexp / b1[4]
bi
b1
b_noexp
## a useful resource: https://richarddmorey.github.io/BayesFactor/#mixed
b_noexp <- anovaBF(ssd ~ direction * magnitude + experiment, data = d)
## a useful resource: https://richarddmorey.github.io/BayesFactor/#mixed
b_noexp <- anovaBF(ssd ~ direction * magnitude + experiment, data = d)
b_noexp
## a useful resource: https://richarddmorey.github.io/BayesFactor/#mixed
b_noexp <- anovaBF(ssd ~ direction * experiment, data = d)
b_noexp
b_noexp[4] / b_noexp[3]
b_noexp[4] / b_noexp
b_noexp[4] / b_noexp[3]
ezANOVA(wid = subject, within = .(direction), between = .(experiment), data = d, detailed = TRUE)
ezANOVA(wid = subject, within = .(direction), between = .(experiment), dv = ssd, data = d, detailed = TRUE)
q()
q()
